<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ctexi-Bot</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
    <link rel="stylesheet" href="{{url_for('static', filename='index.css')}}"/>
  </head>
  <body>
    <button id="chatbot-toggler">
      <span class="material-symbols-outlined">mode_comment</span>
      <span class="material-symbols-rounded">close</span>
    </button>

    <div style="position:absolute; top:20px; right:20px;">
      <form method="POST" action="{{ url_for('auth.logout') }}">
        <button type="submit">DÃ©connexion</button>
      </form>
    </div>

    <h1 class="left-align">Bienvenue sur Ctexi-Bot</h1>
    <p class="subtitle left-align">
      Votre assistant virtuel spÃ©cialisÃ© dans lâ€™accompagnement commercial et administratif avec la Chine.
    </p>

    <div class="services left-align">
      <h3>Nos services :</h3>
      <ul>
        <li>Sourcing et achat de produits en Chine</li>
        <li>Recherche de fournisseurs fiables</li>
        <li>Assistance pour les demandes de visa</li>
        <li>Conseils personnalisÃ©s pour vos projets</li>
      </ul>
    </div>

    <p class="cta left-align">
      Cliquez sur lâ€™icÃ´ne en bas Ã  droite pour dÃ©marrer la conversation avec votre assistant.
    </p>

    <div class="chatbot-popup">
      <!-- Chatbot Header -->
      <div class="chat-header">
        <div class="header-info">
          <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
            <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9z"/>
          </svg>
          <h2 class="logo-text">Ctexi-Bot</h2>
        </div>
        <button id="close-chatbot" class="material-symbols-rounded">keyboard_arrow_down</button>
      </div>

      <!-- Barre de boutons fixes -->
      <div class="quick-bar">
        <button class="quick-btn" data-action="services">Infos sur nos services</button>
        <button class="quick-btn" data-action="faq">FAQ</button>
        <button class="quick-btn" data-action="agent">Contacter un agent</button>
      </div>

      
      <!-- Chatbot Body -->
      <div class="chat-body">
        <div class="message bot-message">
          <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
            <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9z"/>
          </svg>
          <div class="message-text">
            <b> Bonjour {{ user_name }} ðŸ‘‹ !</b><br />
            Je suis <b>CTEXI-BOT</b>,Votre assistant virtuel,<br />
            Comment puis-je vous aider ?
          </div>
        </div>
      </div>

      <!-- Chatbot Footer -->
      <div class="chat-footer">
        <form action="{{url_for('auth.index')}}" class="chat-form">
          <textarea placeholder="Posez-moi votre question..." class="message-input" required></textarea>
          <div class="chat-controls">
            <button type="button" id="emoji-picker" class="material-symbols-rounded">sentiment_satisfied</button>
            <div class="file-upload-wrapper">
              <input type="file" accept="images/*" id="file-input" hidden>
              <button type="button" id="file-upload" class="material-symbols-rounded">attach_file</button>
            </div>
            <button type="submit" id="send-message" class="material-symbols-rounded">arrow_upward</button>
          </div>
        </form>
      </div>
    </div>

    <!-- linking emoji mart script for emoji picker -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
    <script src="{{url_for('static', filename='index.js')}}"></script>
  </body>
</html>
